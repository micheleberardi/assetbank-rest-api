# OAuth Flask Application with Asset Bank

This is a simple Flask application demonstrating how to implement OAuth2 authentication with Asset Bank.

## Prerequisites

- Python 3.6+
- Flask
- Authlib
- Secrets module (comes with Python 3.6+)
- Traceback module (comes with Python 3.6+)

## Installation

1. Clone the repository:
    ```bash
    git clone https://github.com/micheleberardi/assetbank-rest-api.git
    cd assetbank-rest-api
    ```

2. Install the required packages:
    ```bash
       pip install -r requirements.txt
    ```

## Configuration

Replace the placeholder values in the script with your actual configuration values.

```python
CLIENT_ID = 'your_client_id_here'
CLIENT_SECRET = 'your_client_secret_here'
AUTHORIZATION_BASE_URL = 'https://your_assetbank_url/oauth/authorize'
TOKEN_URL = 'https://your_assetbank_url/oauth/token'
REDIRECT_URI = 'https://your_redirect_uri/callback'
API_BASE_URL = 'https://your_assetbank_url/'
SECRET_KEY = 'your_secret_key_here'
```

## Running the Application
Run the Flask application:


```
python app.py
```

Navigate to http://127.0.0.1:22017 in your browser.

Click on "Login with Asset Bank" to start the OAuth2 flow.

The output of the flow will be something like this:

```
{
"access_token": "a79da475642e14b623c31ddsdsds027e1",
"expires_at": 1723142056,
"expires_in": 3600,
"refresh_token": "93982026457b2100d99a1bceds308764b6",
"state": "GwU3KopmsEeknz1cBEUI1X",
"token_type": "Bearer"
}
```

## Additional Script: search-download-assetbank.py
The search-download-assetbank.py script will utilize the token generated by the OAuth2 authentication flow, along with the refresh token. If the access token is expired, this script will regenerate it.

## Functionality
This script interacts with the Asset Bank API to search for assets using either assetIds or keywords. More details on the API can be found here.

Example Parameters
The parameters that can be passed to the search function are:

```
params = {
    "assetIds": "1",
    "keyword":"nature"
    "page": 0,
    "pageSize": 10,
    "sortAttributeId": 1,
    "sortDescending": "false"
}
```



## License
This project is licensed under the MIT License - see the LICENSE file for details.

## Acknowledgements
Flask
Authlib



